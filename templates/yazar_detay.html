{% extends "layout.html" %}

{% block content %}
<div class="row justify-content-center mt-5">
    <div class="col-md-8">

        <!-- Yazar Kartı -->
        <div class="card mb-4 border-0 shadow-sm">
            <div class="card-body d-flex align-items-center">

                <!-- PROFIL FOTO -->
                <div style="
                    width: 120px;
                    height: 120px;
                    border-radius: 50%;
                    overflow: hidden;
                    border: 3px solid #E3DAC9;
                    flex-shrink: 0;
                " class="me-4">
                    {% if yazar['profil_resmi'] %}
                        <img src="{{ url_for('static', filename='uploads/' + yazar['profil_resmi']) }}"
                             style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                        <img src="https://ui-avatars.com/api/?name={{ yazar['ad_soyad'] }}&background=556B2F&color=fff&size=200"
                             style="width: 100%; height: 100%; object-fit: cover;">
                    {% endif %}
                </div>

                <!-- YAZAR BILGI -->
                <div>
                    <h2 class="fw-bold mb-1">{{ yazar['ad_soyad'] }}</h2>

                    <span class="badge rounded-pill mb-3"
                          style="background-color: #E3DAC9; color: #4B5320; font-weight: bold;">
                        {% if yazar['rol'] == 'admin' %}
                            Genel Yayın Yönetmeni
                        {% else %}
                            Yazar
                        {% endif %}
                    </span>

                    <p class="text-muted mb-0">{{ yazar['biyografi'] }}</p>
                </div>

            </div>
        </div>

        <h3 class="mb-3">Yazıları</h3>

        <!-- Yazarın Yazıları -->
        <div class="row">
            {% for yazi in yazilar %}
            <div class="col-md-6 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    {% if yazi['resim'] %}
                        <img src="{{ url_for('static', filename='uploads/' + yazi['resim']) }}"
                             class="card-img-top"
                             style="height: 180px; object-fit: cover;">
                    {% endif %}

                    <div class="card-body">
                        <small class="text-uppercase text-warning fw-bold">{{ yazi['kategori'] }}</small>

                        <h5 class="card-title mt-2">
                            <a href="{{ url_for('detay', id=yazi['id']) }}" class="text-dark text-decoration-none">
                                {{ yazi['baslik'] }}
                            </a>
                        </h5>

                        <p class="card-text small text-muted">
                            {{ yazi['icerik'] | striptags | truncate(120) }}
                        </p>
                    </div>
                </div>
            </div>
            {% else %}
                <p class="text-muted">Bu yazarın henüz yayımlanmış yazısı yok.</p>
            {% endfor %}
        </div>

    </div>
</div>
{% endblock %}